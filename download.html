<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/curvedtitlefavicon.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <title>Download Starting...</title>
    <style>
        /* Additional styling for hidden elements */
        .hidden { display: none; }
    </style>
</head>
<body>
    <center>
    <h1 style="padding-top: 15vh;">Thank You for Downloading Payday!</h1>
    <p id="timer-message" style="padding-top: 5vh; padding-bottom:5vh;">Your download should start shortly. If not, please try again in <span id="countdown">10</span> seconds.</p>
    <p id="download-message" class="hidden" style="padding-top: 5vh; padding-bottom:5vh;">If the download did not start, please <a target="_blank" id="fetch-button" class="android-link" style="color: #E90C3F;">try again</a>.</p>
    </center>

    <div class="instructions">
        <p>Follow these steps to complete the installation:</p>
        <ol>
            <li>
                <p>If your phone doesn't allow the installation of unknown apps, go to Settings when prompted. The screen will look like this:</p>
                <img src="assets/Settings.jpg" alt="Go to settings to allow installation from unknown sources">
            </li>
            <li>
                <p>Toggle on "Allow permission" to permit the installation:</p>
                <img src="assets/unknown.jpg" alt="Toggle on to allow installation from unknown sources">
            </li>
            <li>
                <p>Click on the file again to install the Payday Fantasybook App:</p>
                <img src="assets/Install.jpg" alt="Install the app">
            </li>
            <li>
                <p>Google Play Protect might ask you to scan the app. Click on "Scan app" to ensure your device's safety:</p>
                <img src="assets/scanapp.jpg" alt="Google Play Protect - Scan app recommendation">
            </li>
            <li>
                <p>After the scan, you will be prompted to install the app. Click "Install" to proceed:</p>
                <img src="assets/installafterscan.jpg" alt="Install the app">
            </li>
            <center><div class="or">OR</div></center>
            <li>
                <p>Even if you choose not to scan, click on 'More details':</p>
                <img src="assets/moredetails.jpg" alt="Google Play Protect - Scan app recommendation">
            </li>
            <li>
                <p>Proceed with 'Install without scanning'. Rest assured that our app is perfectly safe:</p>
                <img src="assets/installwithoutscanning.jpg" alt="install without scanning">
            </li>
            <li>
                <p>Once the app is installed, you can either open it immediately by clicking "Open" or find it on your home screen:</p>
                <img src="assets/open.jpg" alt="App installed open button">
            </li>
            <li>
                <p>The app should now be ready to use! Here's what the app icon looks like on your home screen:</p>
                <img src="assets/app.jpg" alt="App icon on home screen">
            </li>
        </ol>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Download link
            const downloadLink = 'https://firebasestorage.googleapis.com/v0/b/payday-8ab25.appspot.com/o/payday_apks%2FPayday_Fantasybook_v1.0.1_build_73.apk?alt=media&token=53d9508a-7b46-4551-ac37-1c8b9378be5c';
            const countdownElement = document.getElementById('countdown');
            const downloadMessage = document.getElementById('download-message');
            const fetchButton = document.getElementById('fetch-button');

            let countdown = 10;

            // Start download automatically
            window.location.href = downloadLink;

            // Update the fetch button to point to the download link
            fetchButton.href = downloadLink;

            // Countdown and display download message
            const countdownInterval = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    // Show the message to retry the download if it didn't start
                    downloadMessage.classList.remove('hidden');
                }
            }, 1000);
        });
    </script>
</body>
</html>
